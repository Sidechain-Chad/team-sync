<%# This tag ensures the form replaces the card on the board %>
<%= turbo_frame_tag @card do %>
  <div class="bg-white p-3 rounded shadow-sm mb-2 border-2 border-blue-500">
    <%= form_with(model: @card, class: "space-y-2") do |f| %>

      <%# Title Input %>
      <%= f.text_field :title,
          class: "w-full border-gray-300 rounded text-sm focus:ring-blue-500 focus:border-blue-500 font-medium text-gray-800",
          autofocus: true %>

      <%# Description Input %>
      <%= f.text_area :description,
          rows: 2,
          class: "w-full border-gray-300 rounded text-xs text-gray-600 focus:ring-blue-500 focus:border-blue-500",
          placeholder: "Add a description..." %>

      <%# Assignee Dropdown %>
      <div class="text-xs">
        <%= f.label :assignee_id, "Assign to:", class: "block text-gray-500 mb-1" %>
        <%= f.collection_select :assignee_id,
              User.all, :id, :email,
              { include_blank: "Unassigned" },
              { class: "w-full border-gray-300 rounded text-xs text-gray-600 focus:ring-blue-500 focus:border-blue-500 py-1" }
        %>
      </div>

      <%# Action Buttons %>
      <div class="flex justify-between items-center pt-2 border-t mt-2">
        <%= f.submit "Save", class: "bg-blue-600 text-white text-xs px-3 py-1 rounded hover:bg-blue-700 cursor-pointer" %>

        <%# FIX: Point Cancel to the Board path so Turbo can find the card frame to restore %>
        <%= link_to "Cancel", board_path(@card.list.board), class: "text-xs text-gray-500 hover:text-gray-700" %>
      </div>

    <% end %>
  </div>
<% end %>
